#!/bin/bash

export TYPEART_TYPE_FILE="@CUCORR_YAML_DIR@/types-jacobi.yaml"
export CUCORR_KERNEL_DATA_FILE="@CUCORR_YAML_DIR@/kernel-jacobi.yaml"

export TSAN_OPTIONS="exitcode=0 suppressions=@CUCORR_SUPPRESSION_DIR@/suppression-lb2.txt"


preflag=$1
if [ -z "$preflag" ]; then
    LD_PRELOAD="@lib_cucorr_interceptor@" mpiexec -np 2 ./bin/jacobi_cuda_aware_mpi -t 2 1
else
    mpiexec -np 2 ./bin/jacobi_cuda_aware_mpi -t 2 1
fi